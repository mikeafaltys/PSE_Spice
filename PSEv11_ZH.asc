Version 4
SHEET 1 3428 1028
WIRE 1376 -352 1248 -352
WIRE 1488 -352 1440 -352
WIRE 784 -272 784 -288
WIRE 848 -272 784 -272
WIRE 848 -256 848 -272
WIRE 1056 -256 1040 -256
WIRE 1152 -256 1136 -256
WIRE 1248 -256 1248 -352
WIRE 1248 -256 1232 -256
WIRE 1360 -256 1248 -256
WIRE 1488 -256 1488 -352
WIRE 1488 -256 1440 -256
WIRE 1488 -208 1488 -256
WIRE 1248 -112 1248 -256
WIRE 1312 -112 1248 -112
WIRE 1488 -96 1488 -128
WIRE 1488 -96 1376 -96
WIRE 1552 -96 1488 -96
WIRE 1664 -96 1632 -96
WIRE 1680 -96 1664 -96
WIRE 1776 -96 1760 -96
WIRE 2080 -96 1776 -96
WIRE 2096 -96 2080 -96
WIRE 2176 -96 2160 -96
WIRE 2192 -96 2176 -96
WIRE 1312 -80 1248 -80
WIRE 2080 0 2080 -96
WIRE 2096 0 2080 0
WIRE 2176 0 2176 -96
WIRE 496 32 416 32
WIRE 560 32 544 32
WIRE 416 48 416 32
WIRE 544 48 544 32
WIRE 496 64 496 32
WIRE 1152 64 1136 64
WIRE 1248 64 1248 -80
WIRE 1248 64 1232 64
WIRE 1360 64 1248 64
WIRE 1488 64 1440 64
WIRE 1664 64 1664 -96
WIRE 1664 64 1488 64
WIRE 1136 80 1136 64
WIRE 1136 80 1008 80
WIRE 2272 144 2272 -96
WIRE 1248 160 1248 64
WIRE 1360 160 1248 160
WIRE 1488 160 1488 64
WIRE 1488 160 1424 160
WIRE 1760 272 1728 272
WIRE 2080 272 1760 272
WIRE 2096 272 2080 272
WIRE 2176 272 2160 272
WIRE 2192 272 2176 272
WIRE 2272 272 2272 144
WIRE 2080 368 2080 272
WIRE 2096 368 2080 368
WIRE 2176 368 2176 272
WIRE 1376 416 1248 416
WIRE 1488 416 1440 416
WIRE 1136 512 1136 80
WIRE 1152 512 1136 512
WIRE 1248 512 1248 416
WIRE 1248 512 1232 512
WIRE 1360 512 1248 512
WIRE 1488 512 1488 416
WIRE 1488 512 1440 512
WIRE 1488 560 1488 512
WIRE 1248 656 1248 512
WIRE 1312 656 1248 656
WIRE 1488 672 1488 640
WIRE 1488 672 1376 672
WIRE 1552 672 1488 672
WIRE 1664 672 1632 672
WIRE 1680 672 1664 672
WIRE 1776 672 1760 672
WIRE 2080 672 1776 672
WIRE 2096 672 2080 672
WIRE 2176 672 2160 672
WIRE 2192 672 2176 672
WIRE 2272 672 2272 272
WIRE 1312 688 1248 688
WIRE 2080 768 2080 672
WIRE 2096 768 2080 768
WIRE 2176 768 2176 672
WIRE 1056 832 1024 832
WIRE 1152 832 1136 832
WIRE 1248 832 1248 688
WIRE 1248 832 1232 832
WIRE 1360 832 1248 832
WIRE 1488 832 1440 832
WIRE 1664 832 1664 672
WIRE 1664 832 1488 832
WIRE 1248 928 1248 832
WIRE 1360 928 1248 928
WIRE 1488 928 1488 832
WIRE 1488 928 1424 928
FLAG 1568 272 0
FLAG 1344 -64 0
FLAG 1344 704 0
FLAG 1344 -128 v+
FLAG 1344 640 v+
FLAG 1776 -96 E1
FLAG 1776 672 E2
FLAG 2272 144 Vref
FLAG 1760 272 VIE
FLAG 896 -272 VR
IOPIN 896 -272 Out
FLAG 784 -288 V+
FLAG 784 -192 0
FLAG 928 80 0
FLAG 848 -208 0
FLAG 896 -192 0
FLAG 1040 -256 VR
IOPIN 1040 -256 In
FLAG 1024 832 VR
IOPIN 1024 832 In
FLAG 416 128 0
FLAG 544 128 0
FLAG 496 112 0
FLAG 560 32 ZeroHz
IOPIN 560 32 Out
FLAG 752 256 CAP_BYP
IOPIN 752 256 In
FLAG 864 256 REBAL1
IOPIN 864 256 In
FLAG 976 256 REBAL2
IOPIN 976 256 In
FLAG 752 336 0
FLAG 864 336 0
FLAG 976 336 0
FLAG 1072 256 IE_EN
IOPIN 1072 256 In
FLAG 1072 336 0
SYMBOL res 1248 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2B
SYMATTR Value {RFA}
SYMBOL res 1248 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 37 58 VTop 2
SYMATTR InstName R1B
SYMATTR Value {RFA}
SYMBOL res 1456 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3B
SYMATTR Value {RFB}
SYMBOL res 1456 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4B
SYMATTR Value {RFB}
SYMBOL res 1536 688 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5B
SYMATTR Value {RS}
SYMBOL cap 1440 400 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1B
SYMATTR Value {Ccomp}
SYMBOL cap 1424 912 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2B
SYMATTR Value {Ccomp}
SYMBOL res 1504 656 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6B
SYMATTR Value {RS}
SYMBOL bv 1664 272 M270
WINDOW 0 -12 56 VTop 2
WINDOW 3 -31 90 VBottom 2
SYMATTR InstName B3
SYMATTR Value V=0.5*V(V+)
SYMBOL res 1248 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1A
SYMATTR Value {RFA}
SYMBOL res 1248 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2A
SYMATTR Value {RFA}
SYMBOL res 1456 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3A
SYMATTR Value {RFB}
SYMBOL res 1456 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4A
SYMATTR Value {RFB}
SYMBOL res 1536 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5A
SYMATTR Value {RS}
SYMBOL cap 1440 -368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1A
SYMATTR Value {Ccomp}
SYMBOL cap 1424 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2A
SYMATTR Value {Ccomp}
SYMBOL res 1504 -112 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6A
SYMATTR Value {RS}
SYMBOL cap 2160 -112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName CDL1
SYMATTR Value {CDL}
SYMBOL res 2176 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RA1
SYMATTR Value {RA}
SYMBOL res 2192 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RCT1
SYMATTR Value {RCT}
SYMBOL cap 2160 656 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName CDL2
SYMATTR Value {CDL}
SYMBOL res 2176 688 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RA2
SYMATTR Value {RA}
SYMBOL res 2192 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RCT2
SYMATTR Value {RCT}
SYMBOL Opamps\\ADA4091 1344 -160 R0
SYMATTR InstName U1
SYMBOL Opamps\\ADA4091 1344 608 R0
SYMATTR InstName U2
SYMBOL voltage 784 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -23 56 Left 2
SYMATTR InstName VDD
SYMATTR Value 5
SYMBOL res 1776 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7A
SYMATTR Value 1m
SYMBOL res 1776 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7B
SYMATTR Value 1m
SYMBOL res 1744 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName VIEZ
SYMATTR Value 27
SYMBOL bv 1024 80 R90
WINDOW 0 13 138 VBottom 2
WINDOW 3 -88 89 VTop 2
SYMATTR InstName B1A
SYMATTR Value V=V(VR)-V(ZeroHz)*RS*RFA/RFB
SYMBOL e 896 -288 R0
SYMATTR InstName VR
SYMATTR Value 0.5
SYMBOL cap 2160 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName CDL3
SYMATTR Value {IECDL}
SYMBOL res 2288 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RA3
SYMATTR Value 47
SYMBOL res 2192 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RCT3
SYMATTR Value {IERCT}
SYMBOL voltage 1152 -256 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName OffsetA
SYMATTR Value 1.8m
SYMBOL voltage 1152 832 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName OffsetB
SYMATTR Value -1.8m
SYMBOL voltage 416 32 R0
WINDOW 3 -50 145 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PWL file=ZeroHz_PWL.txt
SYMATTR InstName V1
SYMBOL e 544 32 R0
WINDOW 0 38 42 Left 2
SYMATTR InstName E1
SYMATTR Value 0.001
SYMBOL voltage 752 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 1
SYMBOL voltage 864 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL voltage 976 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL voltage 1072 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 1
TEXT 376 544 Left 2 !.tran 12s
TEXT 376 576 Left 2 !.param RS=51.0
TEXT 376 608 Left 2 !.param RL=500
TEXT 376 640 Left 2 !.param RFA=100k
TEXT 376 672 Left 2 !.param RFB=100k
TEXT 376 704 Left 2 !.param Ccomp=2.9p
TEXT 376 880 Left 2 !.model NCSW SW(Ron=1G Roff=.0001 Vt=0.5)
TEXT 376 912 Left 2 !.model NOSW SW(Ron=.0001 Roff=10G Vt=0.5)
TEXT 376 736 Left 2 !.param Offset=-21u
TEXT 376 808 Left 2 !.ic V(E1)=2.5\n.ic V(E2)=2.5
TEXT 2072 832 Left 2 !.param CDL {3mF}\n.param RA {200}\n.param RCT {11K}\n.param IECDL {2mF}\n.param IERCT {7K}
TEXT 984 -168 Left 2 ;0uA offset: 721mV\n-21uA offset: 1.8mV
TEXT 984 928 Left 2 ;0uA offset: -721mV\n-21uA offset: -1.8mV
