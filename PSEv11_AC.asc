Version 4
SHEET 1 3428 1028
WIRE 1376 -352 1248 -352
WIRE 1488 -352 1440 -352
WIRE 576 -272 528 -272
WIRE 784 -272 784 -288
WIRE 848 -272 784 -272
WIRE 848 -256 848 -272
WIRE 1056 -256 1040 -256
WIRE 1152 -256 1136 -256
WIRE 1248 -256 1248 -352
WIRE 1248 -256 1232 -256
WIRE 1360 -256 1248 -256
WIRE 1488 -256 1488 -352
WIRE 1488 -256 1440 -256
WIRE 576 -240 528 -240
WIRE 1904 -240 1904 -256
WIRE 576 -208 528 -208
WIRE 1488 -208 1488 -256
WIRE 576 -176 528 -176
WIRE 1248 -112 1248 -256
WIRE 1312 -112 1248 -112
WIRE 1488 -96 1488 -128
WIRE 1488 -96 1376 -96
WIRE 1552 -96 1488 -96
WIRE 1664 -96 1632 -96
WIRE 1680 -96 1664 -96
WIRE 1776 -96 1760 -96
WIRE 1808 -96 1776 -96
WIRE 1840 -96 1840 -192
WIRE 1840 -96 1808 -96
WIRE 1920 -96 1920 -192
WIRE 1920 -96 1904 -96
WIRE 2080 -96 1920 -96
WIRE 2096 -96 2080 -96
WIRE 2176 -96 2160 -96
WIRE 2192 -96 2176 -96
WIRE 1312 -80 1248 -80
WIRE 928 0 784 0
WIRE 2080 0 2080 -96
WIRE 2096 0 2080 0
WIRE 2176 0 2176 -96
WIRE 928 16 928 0
WIRE 992 16 928 16
WIRE 1808 16 1808 -96
WIRE 992 48 928 48
WIRE 928 64 928 48
WIRE 928 64 784 64
WIRE 1152 64 1136 64
WIRE 1248 64 1248 -80
WIRE 1248 64 1232 64
WIRE 1360 64 1248 64
WIRE 1488 64 1440 64
WIRE 1664 64 1664 -96
WIRE 1664 64 1488 64
WIRE 992 80 896 80
WIRE 1136 80 1136 64
WIRE 1136 80 1072 80
WIRE 1888 80 1856 80
WIRE 992 112 976 112
WIRE 992 144 960 144
WIRE 1808 144 1808 96
WIRE 2272 144 2272 -96
WIRE 1248 160 1248 64
WIRE 1360 160 1248 160
WIRE 1488 160 1488 64
WIRE 1488 160 1424 160
WIRE 2048 224 2048 208
WIRE 1760 272 1728 272
WIRE 1808 272 1808 224
WIRE 1808 272 1760 272
WIRE 1984 272 1808 272
WIRE 2080 272 2064 272
WIRE 2096 272 2080 272
WIRE 2176 272 2160 272
WIRE 2192 272 2176 272
WIRE 2272 272 2272 144
WIRE 1808 320 1808 272
WIRE 2080 368 2080 272
WIRE 2096 368 2080 368
WIRE 2176 368 2176 272
WIRE 1376 416 1248 416
WIRE 1488 416 1440 416
WIRE 1808 432 1808 400
WIRE 1888 496 1856 496
WIRE 1136 512 1136 80
WIRE 1152 512 1136 512
WIRE 1248 512 1248 416
WIRE 1248 512 1232 512
WIRE 1360 512 1248 512
WIRE 1488 512 1488 416
WIRE 1488 512 1440 512
WIRE 1488 560 1488 512
WIRE 1248 656 1248 512
WIRE 1312 656 1248 656
WIRE 1488 672 1488 640
WIRE 1488 672 1376 672
WIRE 1552 672 1488 672
WIRE 1664 672 1632 672
WIRE 1680 672 1664 672
WIRE 1776 672 1760 672
WIRE 1808 672 1808 512
WIRE 1808 672 1776 672
WIRE 1840 672 1808 672
WIRE 1920 672 1904 672
WIRE 2080 672 1920 672
WIRE 2096 672 2080 672
WIRE 2176 672 2160 672
WIRE 2192 672 2176 672
WIRE 2272 672 2272 272
WIRE 1312 688 1248 688
WIRE 1840 768 1840 672
WIRE 1920 768 1920 672
WIRE 2080 768 2080 672
WIRE 2096 768 2080 768
WIRE 2176 768 2176 672
WIRE 1056 832 1024 832
WIRE 1152 832 1136 832
WIRE 1248 832 1248 688
WIRE 1248 832 1232 832
WIRE 1360 832 1248 832
WIRE 1488 832 1440 832
WIRE 1664 832 1664 672
WIRE 1664 832 1488 832
WIRE 1856 832 1856 816
WIRE 1248 928 1248 832
WIRE 1360 928 1248 928
WIRE 1488 928 1488 832
WIRE 1488 928 1424 928
FLAG 1568 272 0
FLAG 1344 -64 0
FLAG 1344 704 0
FLAG 1344 -128 v+
FLAG 1344 640 v+
FLAG 1776 -96 E1
FLAG 1776 672 E2
FLAG 2272 144 Vref
FLAG 1760 272 VIE
FLAG 896 -272 VR
IOPIN 896 -272 Out
FLAG 784 -288 V+
FLAG 784 -192 0
FLAG 1856 -240 0
FLAG 1904 816 0
FLAG 896 80 VR
IOPIN 896 80 In
FLAG 1856 32 0
FLAG 1856 448 0
FLAG 704 0 0
FLAG 704 64 0
FLAG 848 -208 0
FLAG 896 -192 0
FLAG 576 -272 AMP_SEL
IOPIN 576 -272 Out
FLAG 576 -240 DAC_EN
IOPIN 576 -240 Out
FLAG 576 -208 REBAL1
IOPIN 576 -208 Out
FLAG 576 -176 REBAL2
IOPIN 576 -176 Out
FLAG 976 112 AMP_SEL
IOPIN 976 112 In
FLAG 960 144 DAC_EN
IOPIN 960 144 In
FLAG 1888 80 REBAL1
IOPIN 1888 80 In
FLAG 1888 496 REBAL2
IOPIN 1888 496 In
FLAG 2048 208 IE_EN
IOPIN 2048 208 In
FLAG 2000 224 0
FLAG 1904 -256 CAP_BYP
IOPIN 1904 -256 In
FLAG 1856 832 CAP_BYP
IOPIN 1856 832 In
FLAG 1040 -256 VR
IOPIN 1040 -256 In
FLAG 1024 832 VR
IOPIN 1024 832 In
FLAG 912 608 CAP_BYP
IOPIN 912 608 In
FLAG 1040 608 IE_EN
IOPIN 1040 608 In
FLAG 912 688 0
FLAG 1040 704 0
SYMBOL res 1248 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2B
SYMATTR Value {RFA}
SYMBOL res 1248 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 37 58 VTop 2
SYMATTR InstName R1B
SYMATTR Value {RFA}
SYMBOL res 1456 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3B
SYMATTR Value {RFB}
SYMBOL res 1456 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4B
SYMATTR Value {RFB}
SYMBOL res 1536 688 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5B
SYMATTR Value {RS}
SYMBOL cap 1440 400 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1B
SYMATTR Value {Ccomp}
SYMBOL cap 1424 912 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2B
SYMATTR Value {Ccomp}
SYMBOL res 1504 656 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6B
SYMATTR Value {RS}
SYMBOL bv 1664 272 M270
WINDOW 0 -12 56 VTop 2
WINDOW 3 -31 90 VBottom 2
SYMATTR InstName B3
SYMATTR Value V=0.5*V(V+)
SYMBOL res 1248 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1A
SYMATTR Value {RFA}
SYMBOL res 1248 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2A
SYMATTR Value {RFA}
SYMBOL res 1456 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3A
SYMATTR Value {RFB}
SYMBOL res 1456 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4A
SYMATTR Value {RFB}
SYMBOL res 1536 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5A
SYMATTR Value {RS}
SYMBOL cap 1440 -368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1A
SYMATTR Value {Ccomp}
SYMBOL cap 1424 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2A
SYMATTR Value {Ccomp}
SYMBOL res 1504 -112 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6A
SYMATTR Value {RS}
SYMBOL cap 1904 -112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName CBA
SYMATTR Value 10µ
SYMBOL cap 1904 656 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName CBB
SYMATTR Value 10µ
SYMBOL cap 2160 -112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName CDL1
SYMATTR Value 4.7µ
SYMBOL res 2288 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RA1
SYMATTR Value 47
SYMBOL res 2192 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RF1
SYMATTR Value 100K
SYMBOL cap 2160 656 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName CDL2
SYMATTR Value 4.7µ
SYMBOL res 2288 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RA2
SYMATTR Value 47
SYMBOL res 2192 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RF2
SYMATTR Value 100K
SYMBOL Opamps\\ADA4091 1344 -160 R0
SYMATTR InstName U1
SYMBOL Opamps\\ADA4091 1344 608 R0
SYMATTR InstName U2
SYMBOL sw 1824 -192 M90
WINDOW 0 -11 62 VLeft 2
WINDOW 3 -18 167 VLeft 2
SYMATTR InstName S3
SYMATTR Value NOSW
SYMBOL sw 1936 768 M270
WINDOW 0 -14 72 VLeft 2
WINDOW 3 3 178 VLeft 2
SYMATTR InstName S4
SYMATTR Value NOSW
SYMBOL voltage 784 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -23 56 Left 2
SYMATTR InstName VDD
SYMATTR Value 5
SYMBOL res 1776 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7A
SYMATTR Value 1m
SYMBOL res 1776 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7B
SYMATTR Value 1m
SYMBOL res 1744 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName VIEZ
SYMATTR Value 5K
SYMBOL res 1792 128 R0
SYMATTR InstName R8A
SYMATTR Value {RBALR}
SYMBOL res 1792 304 R0
SYMATTR InstName R8B
SYMATTR Value {RBALR}
SYMBOL sw 1808 0 M0
WINDOW 0 -17 54 Left 2
WINDOW 3 44 55 Left 2
SYMATTR InstName S7
SYMATTR Value NOSW
SYMBOL sw 1808 416 M0
WINDOW 0 -26 54 Left 2
WINDOW 3 42 55 Left 2
SYMATTR InstName S8
SYMATTR Value NOSW
SYMBOL bv 800 64 R90
WINDOW 0 8 137 VBottom 2
WINDOW 3 33 173 VTop 2
SYMATTR InstName B1B
SYMATTR Value V=V(VR)+{RPWA}*RS*RFA/RFB
SYMBOL bv 800 0 R90
WINDOW 0 13 138 VBottom 2
WINDOW 3 -69 179 VTop 2
SYMATTR InstName B1A
SYMATTR Value V=V(VR)-{PWA}*RS*RFA/RFB
SYMBOL e 896 -288 R0
SYMATTR InstName VR
SYMATTR Value 0.5
SYMBOL cap 2160 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName CDL3
SYMATTR Value 4.7µ
SYMBOL res 2288 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RA3
SYMATTR Value 47
SYMBOL res 2192 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RF3
SYMATTR Value 100K
SYMBOL sw 1968 272 M90
WINDOW 0 -19 69 VLeft 2
WINDOW 3 48 89 VLeft 2
SYMATTR InstName S9
SYMATTR Value NOSW
SYMBOL voltage 1152 -256 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName OffsetA
SYMATTR Value 721µ
SYMBOL voltage 1152 832 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName OffsetB
SYMATTR Value -721µ
SYMBOL python_signal_generator 448 -224 R0
SYMATTR InstName X1
SYMBOL Mux3_1 1024 80 R0
SYMATTR InstName X2
SYMBOL voltage 1040 592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 1
SYMBOL voltage 912 592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 0
TEXT 376 544 Left 2 !.tran 10m
TEXT 376 576 Left 2 !.param RS=51.0
TEXT 376 608 Left 2 !.param RL=500
TEXT 376 640 Left 2 !.param RFA=100k
TEXT 376 672 Left 2 !.param RFB=100k
TEXT 376 704 Left 2 !.param Ccomp=2.9p
TEXT 376 880 Left 2 !.model NCSW SW(Ron=1G Roff=.0001 Vt=0.5)
TEXT 376 912 Left 2 !.model NOSW SW(Ron=.0001 Roff=10G Vt=0.5)
TEXT 376 736 Left 2 !.param Offset=-21u
TEXT 624 536 Left 2 !.param RBALR=100K
TEXT 376 808 Left 2 !.ic V(E1)=2.5\n.ic V(E2)=2.5
TEXT 368 288 Left 2 !.param PWA=1m\n.param RPWA=0.5m
TEXT 376 360 Left 2 !.param CAP_BYP=1\n.param IE_EN=1
TEXT 720 256 Left 2 ;Python Script to build PWL Files\nlabel   dt dac amp  rb1  rb2\nstart,      0,    0,     0,    0,     0\npw,    240,    1,     1,    0,      0\ndt0,      60,    0,     0,    0,     0\nrpw,   480,    1,     0,    0,     0\ndt1,    500,    0,     0,    1,     1\ngap,     10,    0,     0,    0,     0
